---
import BaseLayout from "../layouts/BaseLayout.astro";
import Navbar from "../components/Navbar.astro";
import Section from "../components/Section.astro";
import Divider from "../components/Divider.astro";
import Button from "../components/Button.astro";
import Chip from "../components/Chip.astro";
import Icon from "../components/Icon.astro";
import ProjectSpotlight from "../components/ProjectSpotlight.astro";
import ProjectList from "../components/ProjectList.astro";
import Footer from "../components/Footer.astro";
import LightboxGallery from "../components/LightboxGallery.astro";

import { site, socialLinks, spotlightProject, projects, interests, pcBuildPhotos, hikePhotos } from "../lib/site";

const navLinks = [
  { label: "Über", href: "#about", targetId: "about" },
  { label: "Projekte", href: "#projects", targetId: "projects" },
  { label: "Interessen", href: "#stack", targetId: "stack" },
  { label: "Bilder", href: "#gallery", targetId: "gallery" },
  { label: "Kontakt", href: "#contact", targetId: "contact" },
];

const iconFor = (label: string) => {
  const l = label.toLowerCase();
  if (l.includes("discord")) return "discord";
  if (l.includes("linkedin")) return "linkedin";
  if (l.includes("github")) return "github";
  if (l.includes("steam")) return "steam";
  if (l.includes("xbox")) return "xbox";
  return "arrow-up-right";
};
---

<BaseLayout>
  <Navbar brand={site.domain} links={navLinks} />

  <main>
    <!-- Hero -->
    <section id="top" class="pt-12 pb-10 sm:pt-16">
      <div class="mx-auto max-w-6xl px-5">
        <div class="grid gap-10 lg:grid-cols-[1.15fr_0.85fr] lg:items-start">
          <div class="reveal">
            <div class="flex flex-wrap items-center gap-2">
              <Chip tone="accent">private · nicht-kommerziell</Chip>
              <Chip>falkner.info</Chip>
            </div>

            <h1 class="mt-6 text-4xl sm:text-6xl font-semibold tracking-tight leading-[1.03]">
              Schön, dass du hier bist!
            </h1>

            <p class="mt-5 text-base sm:text-lg leading-relaxed text-muted max-w-2xl">
              Ich bin <strong class="text-text">Christian Falkner</strong>. Diese Seite ist mein kleines Zuhause im Web: ein paar Links,
              Projekte und Dinge, die mich gerade beschäftigen.
            </p>

            <p class="mt-4 text-sm text-muted max-w-2xl">
              Geboren in <strong class="text-text">Nürnberg</strong>, Stationen in <strong class="text-text">Wolfsburg</strong> und
              <strong class="text-text">Bad Nauheim</strong> — heute nahe <strong class="text-text">München</strong> im
              <strong class="text-text">dualen Studium im öffentlichen Dienst</strong>.
            </p>

            <div class="mt-8 flex flex-wrap gap-3">
              <Button href="#contact" variant="primary" ariaLabel="Zum Kontakt springen">
                <Icon name="mail" size={16} />
                Kontakt
              </Button>
              <Button href="#projects" variant="secondary" ariaLabel="Zu den Projekten springen">
                Projekte ansehen
                <Icon name="arrow-right" size={16} />
              </Button>
            </div>

            <div class="mt-10">
              <Divider />
              <div class="mt-4 flex flex-wrap gap-3 text-sm text-muted">
                <span class="meta">Schnelllinks</span>
                {socialLinks.slice(0, 3).map((l) => (
                  <a
                    href={l.href}
                    target="_blank"
                    rel="noopener"
                    class="inline-flex items-center gap-2 hover:text-text transition-colors">
                    <Icon name={iconFor(l.label) as any} size={16} class="text-muted" />
                    <span class="underline decoration-border/70 underline-offset-4 hover:decoration-accent/70">{l.label}</span>
                  </a>
                ))}
              </div>
            </div>
          </div>

          <div class="reveal lg:justify-self-end" style="--reveal-delay: 80ms">
            <div class="relative">
              <div aria-hidden="true" class="absolute -inset-6 rounded-lg bg-accent/10 blur-2xl"></div>
              <img
                src="/images/profile.webp"
                alt="Profilfoto von Christian Falkner"
                width="640"
                height="640"
                class="relative w-full max-w-[420px] rounded-lg border border-border/70 shadow-soft" />
              <div class="mt-4 flex flex-wrap gap-2">
                <Chip>
                  <Icon name="gamepad" size={14} class="text-muted" /> Gaming
                </Chip>
                <Chip>
                  <Icon name="cpu" size={14} class="text-muted" /> Computer
                </Chip>
                <Chip>
                  <Icon name="mountain" size={14} class="text-muted" /> Wandern
                </Chip>
                <Chip>
                  <Icon name="pickaxe" size={14} class="text-muted" /> Minecraft
                </Chip>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Über mich -->
    <Section
      id="about"
      title="Über mich"
      kicker="Ein paar Zeilen"
      lead="Kurz gesagt: Ich mag ruhige Oberflächen, saubere Lösungen und Projekte, die man Stück für Stück besser macht.">
      <div class="grid gap-10 lg:grid-cols-[1.2fr_0.8fr]">
        <div class="space-y-5 text-muted leading-relaxed">
          <p class="reveal" style="--reveal-delay: 120ms">
            Durch ein paar Umzüge habe ich früh gelernt, schnell anzukommen — und wie viel ein guter Freundeskreis ausmacht.
            Genau deshalb faszinieren mich Communities bis heute.
          </p>
          <p class="reveal" style="--reveal-delay: 170ms">
            Im Alltag bin ich gerne in Themen unterwegs, bei denen Technik und Praxis zusammenkommen. Im dualen Studium im öffentlichen
            Dienst geht’s für mich oft darum, Dinge strukturiert anzugehen und gleichzeitig neugierig zu bleiben.
          </p>
          <p class="reveal" style="--reveal-delay: 220ms">
            Abends wird’s dann meistens entspannter: Ich spiele, schraube an Rechnern oder bin draußen unterwegs. Und wenn ich an einem
            <strong class="text-text">Herzensprojekt</strong> hänge, ist es oft die <strong class="text-text">Minecraft Gilde</strong> — dort betreue
            ich Server und Website.
          </p>
        </div>

        <aside class="space-y-6">
          <div class="reveal" style="--reveal-delay: 140ms">
            <div class="meta">Lebensstationen</div>
            <div class="mt-4 border-l border-border/70 pl-4 space-y-4">
              <div>
                <div class="text-sm font-medium text-text">Nürnberg</div>
                <div class="text-sm text-muted">Startpunkt.</div>
              </div>
              <div>
                <div class="text-sm font-medium text-text">Wolfsburg & Bad Nauheim</div>
                <div class="text-sm text-muted">Schulzeit, neue Orte, neue Menschen.</div>
              </div>
              <div>
                <div class="text-sm font-medium text-text">Nahe München</div>
                <div class="text-sm text-muted">Heute: Studium, Alltag, Berge in Reichweite.</div>
              </div>
            </div>
          </div>

          <div class="reveal" style="--reveal-delay: 220ms">
            <div class="meta">Gerade aktuell</div>
            <Divider class="mt-3" />
            <ul class="mt-5 space-y-3 text-sm text-muted">
              <li class="flex items-start gap-3">
                <Icon name="cpu" size={24} class="mt-0.5 text-muted shrink-0" />
                <span>
                  <strong class="text-text">PC-Builds</strong> — aktuell bin ich oft im Feintuning-Modus und schraube so lange, bis Setup und Kühlung einfach rund wirken.
                </span>
              </li>
              <li class="flex items-start gap-3">
                <Icon name="pickaxe" size={24} class="mt-0.5 text-muted shrink-0" />
                <span>
                  <strong class="text-text">Minecraft Gilde</strong> — mein Herzensprojekt: Ich betreue Server und Website und halte alles am Laufen.
                </span>
              </li>
              <li class="flex items-start gap-3">
                <Icon name="mountain" size={24} class="mt-0.5 text-muted shrink-0" />
                <span>
                  <strong class="text-text">Tagestouren</strong> — entspannt raus, viel Aussicht, Kopf frei bekommen.
                </span>
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </Section>

    <!-- Projekte -->
    <Section
      id="projects"
      title="Projekte"
      kicker="Dinge, die ich baue"
      lead="Ein paar Sachen, an denen ich regelmäßig hänge — und ein Projekt, das gerade am meisten Zeit bekommt.">
      <div class="space-y-10">
        <div class="reveal">
          <ProjectSpotlight project={spotlightProject} serverAddress="minecraft-gilde.de" />
        </div>

        <div class="reveal" style="--reveal-delay: 80ms">
          <div class="meta">Mehr</div>
          <Divider class="mt-3" />
          <div class="mt-6">
            <ProjectList projects={projects} />
          </div>
        </div>
      </div>
    </Section>

    <!-- Interessen -->
    <Section
      id="stack"
      title="Interessen"
      kicker="Wofür ich schnell brenne"
      lead="Nicht alles ist ein Projekt. Manche Dinge bleiben einfach hängen — weil sie Spaß machen oder gut tun.">
      <div class="grid gap-6 md:grid-cols-2">
        {interests.map((it, i) => (
          <article
            class="reveal border border-border/70 bg-surface/40 backdrop-blur-sm rounded-lg p-6 shadow-soft"
            style={`--reveal-delay: ${Math.min(i * 70, 210)}ms`}>
            <h3 class="text-lg font-semibold tracking-tight text-text">{it.title}</h3>
            <p class="mt-2 text-sm leading-relaxed text-muted">{it.summary}</p>
            <div class="mt-4 flex flex-wrap gap-2">
              {it.chips.map((c) => (
                <Chip>{c}</Chip>
              ))}
            </div>
          </article>
        ))}
      </div>
    </Section>

    <!-- Galerie -->
    <Section
      id="gallery"
      title="Bilder"
      kicker="Einblicke"
      lead="Ein paar Schnappschüsse: PC-Systeme, an denen ich gern tüftle — und entspannte Tagestouren.">
      <div class="space-y-12">
        <div id="pc-builds" class="scroll-mt-24">
          <div class="flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between">
            <div>
              <div class="meta">PC-Systeme</div>
              <h3 class="mt-2 text-xl font-semibold tracking-tight text-text">Builds & Custom-Wasserkühlung</h3>
              <p class="mt-2 text-sm text-muted leading-relaxed max-w-2xl">
                Ein paar ausgewählte Builds — von Luftkühlung bis zum Custom-Loop ist alles dabei.
              </p>
            </div>
          </div>

          <LightboxGallery id="pc" images={pcBuildPhotos} label="PC-Systeme" />
        </div>

        <Divider />

        <div id="touren" class="scroll-mt-24">
          <div class="flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between">
            <div>
              <div class="meta">Draußen</div>
              <h3 class="mt-2 text-xl font-semibold tracking-tight text-text">Entspannte Tagestouren</h3>
              <p class="mt-2 text-sm text-muted leading-relaxed max-w-2xl">Raus aus dem Kopf, rein in die Aussicht.</p>
            </div>
          </div>

          <LightboxGallery id="hike" images={hikePhotos} label="Tagestouren" />
        </div>
      </div>
    </Section>

    <!-- Kontakt -->
    <Section id="contact" title="Kontakt" kicker="Mail & Links" lead="Schreib mir gern eine Mail — ich melde mich, sobald ich kann.">
      <div class="grid gap-10 lg:grid-cols-[1.1fr_0.9fr]">
        <div class="reveal">
          <div class="border border-border/70 bg-surface/40 backdrop-blur-sm rounded-lg p-6">
            <div class="meta">E‑Mail</div>
            <p class="mt-3 text-xl sm:text-2xl font-semibold tracking-tight">
              <a class="underline decoration-border hover:decoration-accent" href={`mailto:${site.email}`}>{site.email}</a>
            </p>

            <div class="mt-6 flex flex-wrap gap-3">
              <Button href={`mailto:${site.email}`} variant="primary">
                <Icon name="mail" size={16} />
                Mail öffnen
              </Button>

              <Button variant="secondary" ariaLabel="E-Mail-Adresse kopieren" data-copy data-copy-value={site.email}>
                <Icon name="copy" size={16} />
                Kopieren
              </Button>

              <span class="inline-flex items-center text-sm text-muted" data-copy-status aria-live="polite"></span>
            </div>
          </div>
        </div>

        <aside class="reveal" style="--reveal-delay: 80ms">
          <div class="meta">Social</div>
          <Divider class="mt-3" />

          <div class="mt-6 border-t border-border/70">
            {socialLinks.map((l, i) => (
              <a
                href={l.href}
                target="_blank"
                rel="noopener"
                class="group w-full flex items-center justify-between gap-4 py-4 border-b border-border/70 hover:bg-surface/30 transition reveal"
                style={`--reveal-delay: ${Math.min(i * 40, 160)}ms`}>
                <div class="flex items-center gap-3 min-w-0 flex-1 overflow-hidden">
                  <Icon name={iconFor(l.label) as any} size={18} class="text-muted group-hover:text-text transition-colors" />
                  <div class="min-w-0 flex-1">
                    <div class="text-sm font-medium text-text">{l.label}</div>
                    <div class="text-xs text-muted truncate hidden sm:block">{l.href}</div>
                  </div>
                </div>
                <Icon name="arrow-up-right" size={16} class="text-muted group-hover:text-text transition-colors" />
              </a>
            ))}
          </div>
        </aside>
      </div>
    </Section>

    <Footer />
  </main>
</BaseLayout>
