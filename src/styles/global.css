/* Tailwind CSS v4 liest die tailwind.config.* nur dann, wenn sie explizit eingebunden wird.
   Damit Utilities wie `bg-bg`, `text-muted` etc. (aus unserem Theme) weiterhin funktionieren,
   referenzieren wir hier die Config.
*/
@config "../../tailwind.config.mjs";

@import "tailwindcss";

:root {
  /* Standard: Dark Mode */
  color-scheme: dark;

  /* Neutrale Basis */
  --bg: 255 19% 5%;
  --surface: 252 21% 8%;
  --border: 255 18% 18%;
  --text: 0 0% 98%;
  --muted: 250 12% 72%;

  /* Akzent (warm, leicht goldig) */
  --accent: 28 100% 66%;
  --accent2: 28 100% 76%;

  /* Typography */
  --font-sans:
    "Geist Sans", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Arial,
    "Noto Sans", sans-serif;
  --font-display:
    "Space Grotesk Variable", "Space Grotesk", "Geist Sans", ui-sans-serif,
    system-ui, -apple-system, "Segoe UI", Arial, "Noto Sans", sans-serif;

  /* Design-Tokens (zentral steuerbar) */
  --w-body: 300;
  --w-title: 420;
  --w-strong: 500;

  /* Spacing: eher luftiger, Layout bleibt gleich */
  --space-section-y: 4.25rem; /* ~68px */
  --space-section-y-sm: 5.25rem; /* ~84px */
  --space-section-gap: 2.75rem; /* ~44px */

  /* Radius (subtil, aber zentral steuerbar) */
  --r-card: 0.5rem; /* entspricht rounded-lg */
  --r-control: 0.375rem; /* entspricht rounded-md */

  /* Link-Style (Gelb mit leicht mehr Orange) */
  --link: 42 100% 62%;
  --link-hover: 38 100% 70%;
  --link-underline-alpha: 0.55;
  --link-underline-alpha-hover: 0.85;
  --u-thickness: 0.08em;
  --u-offset: 0.22em;

  /* Focus-Ring (einheitlich, subtil) */
  --focus-ring: var(--link);
  --focus-alpha: 0.45;
  --focus-width: 2px;
  --focus-offset: 3px;
  --focus-offset-bg: var(--bg);
  --focus-offset-alpha: 0.9;
}

/* Sanftes Scrollen für Ankerlinks (respektiert Reduced Motion) */
html {
  scroll-behavior: smooth;
}
@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }
}

/* Besseres Scroll-Offset unter der sticky Navbar */
[id] {
  scroll-margin-top: 96px;
}

body {
  @apply min-h-screen bg-bg text-text antialiased;
  font-family: var(--font-sans);
  /* 300 wirkt deutlich cleaner als 400 (Inter-Standard) */
  font-weight: var(--w-body);
  text-rendering: geometricPrecision;
}

/* Strong-Text etwas dezenter, damit die Typo clean bleibt */
strong {
  font-weight: var(--w-strong);
}

/* Headlines etwas "editorialer" */
h1,
h2,
h3,
h4,
.font-display {
  font-family: var(--font-display);
  letter-spacing: -0.02em;
}

::selection {
  background: hsl(var(--accent) / 0.25);
}

a {
  @apply outline-none;
}

.skip-link {
  position: fixed;
  top: 0.75rem;
  left: 0.75rem;
  z-index: 200;
  padding: 0.625rem 0.875rem;
  border: 1px solid hsl(var(--border));
  border-radius: var(--r-control);
  background: hsl(var(--surface));
  color: hsl(var(--text));
  text-decoration: none;
  font-weight: var(--w-strong);
  line-height: 1;
  transform: translateY(-150%);
  opacity: 0;
  transition:
    transform 140ms ease,
    opacity 140ms ease;
}

.skip-link:focus,
.skip-link:focus-visible {
  transform: translateY(0);
  opacity: 1;
}

:focus-visible {
  outline: none;
  box-shadow:
    0 0 0 var(--focus-offset)
      hsl(var(--focus-offset-bg) / var(--focus-offset-alpha)),
    0 0 0 calc(var(--focus-offset) + var(--focus-width))
      hsl(var(--focus-ring) / var(--focus-alpha));
}

@layer utilities {
  /* Standard-Link: Gelb/Orange, sauberer Underline-Rhythmus */
  .u-link {
    color: hsl(var(--link));
    text-decoration-line: underline;
    text-decoration-thickness: var(--u-thickness);
    text-underline-offset: var(--u-offset);
    text-decoration-color: hsl(var(--link) / var(--link-underline-alpha));
    transition:
      color 150ms ease,
      text-decoration-color 150ms ease;
  }
  .u-link:hover,
  .u-link:focus-visible {
    color: hsl(var(--link-hover));
    text-decoration-color: hsl(
      var(--link-hover) / var(--link-underline-alpha-hover)
    );
  }

  /* Footer/Secondary-Link: bewusst neutral, ohne Gelb */
  .u-link-muted {
    color: hsl(var(--muted));
    text-decoration-line: underline;
    text-decoration-thickness: var(--u-thickness);
    text-underline-offset: var(--u-offset);
    text-decoration-color: hsl(var(--border) / 0.75);
    transition:
      color 150ms ease,
      text-decoration-color 150ms ease;
  }
  .u-link-muted:hover,
  .u-link-muted:focus-visible {
    color: hsl(var(--text));
    text-decoration-color: hsl(var(--border) / 0.9);
  }
}

/* Dezentes Grain-Overlay */
.grain {
  pointer-events: none;
  position: fixed;
  inset: 0;
  opacity: 0.06;
  mix-blend-mode: overlay;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.55'/%3E%3C/svg%3E");
  background-size: 160px 160px;
}

/* Hintergrund-Blobs: responsiv skalieren, damit sie auch auf großen Screens sichtbar bleiben
   ohne "knallig" zu wirken. */
:root {
  /* vmin skaliert sauber bei Ultrawide/4K, clamp verhindert Übertreibung */
  --blob-a: clamp(420px, 66vmin, 1400px);
  --blob-b: clamp(520px, 76vmin, 1600px);
  --blob-c: clamp(420px, 64vmin, 1400px);

  /* Blur skaliert ebenfalls mit (auf großen Screens sonst zu "hart") */
  --blob-blur: clamp(60px, 7vmin, 220px);

  /* Vignette: hält Kontrast/Lesbarkeit stabil */
  --blob-vignette: clamp(120px, 12vmin, 260px);
}

.bg-artboard {
  position: fixed;
  inset: 0;
  z-index: -10;
  overflow: hidden;
  pointer-events: none;
}

.bg-blob {
  position: absolute;
  border-radius: 9999px;
  filter: blur(var(--blob-blur));
  transform: translate3d(0, 0, 0);
  will-change: transform;
}

/* Positionen bewusst "out of frame", damit es nur ein sanftes Farblicht ist */
.bg-blob-a {
  width: var(--blob-a);
  height: var(--blob-a);
  top: calc(var(--blob-a) * -0.28);
  left: calc(var(--blob-a) * -0.34);
  background: hsl(var(--accent) / 0.16);
}

.bg-blob-b {
  width: var(--blob-b);
  height: var(--blob-b);
  top: 12vmin;
  right: calc(var(--blob-b) * -0.36);
  background: hsl(var(--accent2) / 0.14);
}

.bg-blob-c {
  width: var(--blob-c);
  height: var(--blob-c);
  bottom: calc(var(--blob-c) * -0.34);
  left: 10vmin;
  background: hsl(var(--accent) / 0.13);
}

.bg-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    to bottom,
    hsl(var(--bg) / 0.28),
    hsl(var(--bg)),
    hsl(var(--bg))
  );
}

.bg-vignette {
  position: absolute;
  inset: 0;
  box-shadow: inset 0 0 var(--blob-vignette) rgba(0, 0, 0, 0.55);
}

/* Kleine Helfer-Klasse für Meta-Text */
.meta {
  @apply text-xs tracking-[0.14em] uppercase text-muted;
}

/* --- Subtile Bewegung, die trotzdem "editorial" wirkt --- */
@media (prefers-reduced-motion: no-preference) {
  .blob-float-a {
    animation: blob-float 14s ease-in-out infinite;
  }
  .blob-float-b {
    animation: blob-float 18s ease-in-out infinite reverse;
  }
  .blob-float-c {
    animation: blob-float 22s ease-in-out infinite;
  }
}
@keyframes blob-float {
  0%,
  100% {
    transform: translate3d(0, 0, 0) scale(1);
  }
  50% {
    transform: translate3d(10px, -14px, 0) scale(1.03);
  }
}

/* --- Scroll-Reveal (JS-optimiert, aber ohne JS trotzdem ok) --- */
html[data-js="true"] .reveal {
  opacity: 0;
  transform: translate3d(0, 10px, 0);
  filter: blur(2px);
  transition:
    opacity 650ms cubic-bezier(0.2, 0.8, 0.2, 1),
    transform 650ms cubic-bezier(0.2, 0.8, 0.2, 1),
    filter 650ms cubic-bezier(0.2, 0.8, 0.2, 1);
  transition-delay: var(--reveal-delay, 0ms);
  will-change: opacity, transform, filter;
}

html[data-js="true"] .reveal.is-in {
  opacity: 1;
  transform: translate3d(0, 0, 0);
  filter: blur(0);
}

@media (prefers-reduced-motion: reduce) {
  html[data-js="true"] .reveal {
    opacity: 1;
    transform: none;
    filter: none;
    transition: none;
  }
}

/* --- Utilities --- */

/* Scrollbars ausblenden, aber Scrollen beibehalten (z. B. für Carousels) */
.no-scrollbar {
  -ms-overflow-style: none; /* IE/Edge */
  scrollbar-width: none; /* Firefox */
}
.no-scrollbar::-webkit-scrollbar {
  display: none; /* Chrome/Safari */
}

/* Hintergrund-Scroll sperren, wenn ein Modal offen ist */
body[data-scroll-lock="true"] {
  overflow: hidden;
}
